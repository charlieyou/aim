{"id":"ai-meter-11v","title":"Epic: aim CLI Tool - AI Usage Meter","description":"# aim CLI Tool Implementation\n\nBuild a Go CLI tool that queries Claude, Codex, and Gemini quota APIs and displays usage in a unified ASCII table.\n\n## Spec\n- [docs/2026-01-02-aim-spec.md](docs/2026-01-02-aim-spec.md)\n- [docs/2026-01-02-aim-plan.md](docs/2026-01-02-aim-plan.md)\n\n## Key Requirements\n- Single static Go binary with no runtime dependencies\n- Read OAuth credentials from standard filesystem locations\n- Display usage percentages with ASCII bars and reset times\n- Graceful error handling (warnings, not failures)\n- Always exit 0\n\n## Architecture\n- `internal/providers/` - Provider implementations (Claude, Codex, Gemini)\n- `internal/output/` - Table rendering and time formatting\n- `main.go` - Orchestration with concurrent provider queries\n\n## Child Issues\nSee linked issues for implementation breakdown.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-02T19:38:49.714148292Z","created_by":"cyou","updated_at":"2026-01-02T19:38:49.714148292Z"}
{"id":"ai-meter-11v.1","title":"Foundation: Go module setup and shared types","description":"## Context\n- First task for aim CLI - establishes project structure and shared types\n- All other tasks depend on this foundation\n- Combines Plan Tasks 1 and 2 for efficiency\n\n## Scope\n**In:** Initialize Go module, create directory structure, define shared types and interfaces\n**Out:** Provider implementations, output formatting, tests\n\n## Primary Files\n- `go.mod` (new)\n- `main.go` (new - skeleton only)\n- `internal/providers/types.go` (new)\n\n## Implementation Details\n\n### go.mod\n```\nmodule github.com/cyou/aim\n\ngo 1.22\n```\n\n### main.go (skeleton)\n```go\npackage main\n\nfunc main() {\n    // TODO: Wire up providers and output\n}\n```\n\n### internal/providers/types.go\n```go\npackage providers\n\nimport (\n    \"context\"\n    \"time\"\n)\n\n// UsageRow represents a single row in the output table\ntype UsageRow struct {\n    Provider     string    // e.g., \"Claude\", \"Codex (user@example.com)\", \"Gemini (user@example.com)\"\n    Label        string    // e.g., \"5-hour\", \"7-day\", \"gemini-2.5-pro\"\n    UsagePercent float64   // 0-100\n    ResetTime    time.Time // When quota resets\n    IsWarning    bool      // If true, this is a warning row\n    WarningMsg   string    // Warning message (only if IsWarning)\n}\n\n// Provider defines the interface all quota providers must implement\ntype Provider interface {\n    Name() string\n    FetchUsage(ctx context.Context) ([]UsageRow, error)\n}\n\n// ProviderError wraps errors with provider context\ntype ProviderError struct {\n    Provider string\n    Message  string\n    Err      error\n}\n\nfunc (e *ProviderError) Error() string {\n    if e.Err != nil {\n        return e.Provider + \": \" + e.Message + \": \" + e.Err.Error()\n    }\n    return e.Provider + \": \" + e.Message\n}\n```\n\n## Acceptance Criteria\n- [ ] `go mod tidy` succeeds without errors\n- [ ] `go build ./...` succeeds\n- [ ] `internal/providers/types.go` exports `UsageRow`, `Provider`, and `ProviderError`\n- [ ] Types compile and can be imported from main package\n\n## Test Plan\n- Run `go build ./...` to verify compilation\n- No unit tests needed for this task (types only)\n\n## Notes for Agent\n- Use Go 1.22+ as specified in plan\n- Keep main.go minimal - just package declaration and empty main()\n- Create directories: `internal/providers/`, `internal/output/`","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-02T19:39:06.76779302Z","created_by":"cyou","updated_at":"2026-01-02T19:39:30.318794246Z","dependencies":[{"issue_id":"ai-meter-11v.1","depends_on_id":"ai-meter-11v","type":"parent-child","created_at":"2026-01-02T19:39:06.774448628Z","created_by":"daemon"}]}
{"id":"ai-meter-11v.2","title":"Time formatting utilities with unit tests","description":"## Context\n- Formats reset times for display in the quota table\n- Relative format (\u003c24h): \"in 2h 15m\"\n- Absolute format (\u003e=24h): \"Jan 8 07:00 PST\"\n- Plan Task 3\n\n## Scope\n**In:** FormatResetTime function with edge case handling, unit tests\n**Out:** Table rendering, provider implementations\n\n## Primary Files\n- `internal/output/time.go` (new)\n- `internal/output/time_test.go` (new)\n\n## Implementation Details\n\n### internal/output/time.go\n```go\npackage output\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\n// FormatResetTime formats a reset time for display.\n// - If \u003c24h from now: \"in Xh Ym\" (relative)\n// - If \u003e=24h from now: \"Mon D HH:MM TZ\" (absolute in local time)\n// - If zero time: \"-\"\n// - If in the past: \"expired\" or the actual time\nfunc FormatResetTime(t time.Time) string {\n    if t.IsZero() {\n        return \"-\"\n    }\n    \n    now := time.Now()\n    diff := t.Sub(now)\n    \n    if diff \u003c= 0 {\n        return \"expired\"\n    }\n    \n    if diff \u003c 24*time.Hour {\n        hours := int(diff.Hours())\n        minutes := int(diff.Minutes()) % 60\n        if hours \u003e 0 {\n            return fmt.Sprintf(\"in %dh %dm\", hours, minutes)\n        }\n        return fmt.Sprintf(\"in %dm\", minutes)\n    }\n    \n    // Use local timezone\n    local := t.Local()\n    return local.Format(\"Jan 2 15:04 MST\")\n}\n```\n\n## Acceptance Criteria\n- [ ] `FormatResetTime` returns \"in Xh Ym\" for times 1h, 12h, 23h59m from now\n- [ ] `FormatResetTime` returns \"Mon D HH:MM TZ\" for times 25h, 48h, 7d from now\n- [ ] `FormatResetTime` returns \"-\" for zero time\n- [ ] `FormatResetTime` returns \"expired\" for past times\n- [ ] All unit tests pass\n\n## Test Plan (TDD)\n1. Write failing tests first for each case:\n   - Relative: 1h, 2h15m, 12h, 23h59m from now\n   - Absolute: 25h, 48h, 7d from now\n   - Edge: zero time, past time (1h ago)\n2. Implement FormatResetTime\n3. Verify all tests pass\n\n### Test Cases\n```go\nfunc TestFormatResetTime_Relative(t *testing.T) {\n    // 2h 15m from now -\u003e \"in 2h 15m\"\n}\n\nfunc TestFormatResetTime_Absolute(t *testing.T) {\n    // 25h from now -\u003e \"Jan X HH:MM TZ\"\n}\n\nfunc TestFormatResetTime_Zero(t *testing.T) {\n    // time.Time{} -\u003e \"-\"\n}\n\nfunc TestFormatResetTime_Past(t *testing.T) {\n    // 1h ago -\u003e \"expired\"\n}\n```\n\n## Notes for Agent\n- Use table-driven tests for cleaner test code\n- Be careful with timezone handling in tests - use fixed offsets or mock time.Now()\n- The 24h boundary is inclusive on the absolute side (\u003e=24h uses absolute format)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T19:39:31.696399019Z","created_by":"cyou","updated_at":"2026-01-02T19:39:31.696399019Z","dependencies":[{"issue_id":"ai-meter-11v.2","depends_on_id":"ai-meter-11v","type":"parent-child","created_at":"2026-01-02T19:39:31.703325424Z","created_by":"daemon"}]}
{"id":"ai-meter-11v.3","title":"Claude provider implementation with unit tests","description":"## Context\n- Implements Claude OAuth quota API integration\n- Reads credentials from ~/.claude/.credentials.json\n- Returns 5-hour and 7-day usage rows\n- Plan Task 5\n\n## Scope\n**In:** ClaudeProvider struct, credential loading, API calls, unit tests with httptest\n**Out:** Other providers, main orchestration\n\n## Primary Files\n- `internal/providers/claude.go` (new)\n- `internal/providers/claude_test.go` (new)\n\n## API Details (from QUOTA_APIS.md)\n\n### Endpoint\n```\nGET https://api.anthropic.com/api/oauth/usage\n```\n\n### Headers\n```\nAuthorization: Bearer {accessToken}\nAccept: application/json\nanthropic-beta: oauth-2025-04-20\n```\n\n### Response\n```json\n{\n  \"five_hour\": {\n    \"utilization\": 24.0,\n    \"resets_at\": \"2026-01-02T19:59:59.600956+00:00\"\n  },\n  \"seven_day\": {\n    \"utilization\": 36.0,\n    \"resets_at\": \"2026-01-08T06:59:59.600974+00:00\"\n  }\n}\n```\n\n### Credentials (~/.claude/.credentials.json)\n```json\n{\n  \"claudeAiOauth\": {\n    \"accessToken\": \"...\",\n    \"expiresAt\": 1767396165210\n  }\n}\n```\nNote: expiresAt is in **milliseconds**\n\n## Implementation Details\n\n```go\ntype ClaudeProvider struct {\n    homeDir string\n    baseURL string        // For testing - defaults to https://api.anthropic.com\n    client  *http.Client  // With 30s timeout\n}\n\nfunc NewClaudeProvider() (*ClaudeProvider, error)\nfunc (c *ClaudeProvider) Name() string // returns \"Claude\"\nfunc (c *ClaudeProvider) FetchUsage(ctx context.Context) ([]UsageRow, error)\nfunc (c *ClaudeProvider) loadCredentials() (token string, err error)\n```\n\n## Acceptance Criteria\n- [ ] Reads credentials from ~/.claude/.credentials.json\n- [ ] Parses accessToken from claudeAiOauth.accessToken\n- [ ] Makes GET request with correct headers including anthropic-beta\n- [ ] Returns 2 UsageRow structs (5-hour and 7-day)\n- [ ] Parses ISO 8601 timestamps correctly\n- [ ] Returns warning row if credentials file missing\n- [ ] Returns warning row if credentials file malformed\n- [ ] Returns warning row if API returns error (401, 500, etc.)\n- [ ] Uses 30s HTTP timeout\n- [ ] baseURL is configurable for testing\n- [ ] All unit tests pass\n\n## Test Plan (TDD)\n1. Write failing test for happy path with mock server\n2. Implement basic credential loading and API call\n3. Write failing test for missing credentials\n4. Add error handling\n5. Write failing test for API errors\n6. Add API error handling\n\n### Test Cases\n```go\nfunc TestClaudeProvider_FetchUsage_Success(t *testing.T) {\n    // Mock server returns valid JSON -\u003e 2 correct UsageRows\n}\n\nfunc TestClaudeProvider_FetchUsage_MissingCreds(t *testing.T) {\n    // No creds file -\u003e warning row with path\n}\n\nfunc TestClaudeProvider_FetchUsage_MalformedCreds(t *testing.T) {\n    // Invalid JSON -\u003e warning row\n}\n\nfunc TestClaudeProvider_FetchUsage_APIError(t *testing.T) {\n    // 401 response -\u003e warning row with error\n}\n```\n\n## Notes for Agent\n- Use httptest.Server and set provider.baseURL to test server URL\n- Parse resets_at as RFC3339 (ISO 8601)\n- Read-only: never modify credential files\n- Never call inference/generation endpoints","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T19:39:55.490535163Z","created_by":"cyou","updated_at":"2026-01-02T19:39:55.490535163Z","dependencies":[{"issue_id":"ai-meter-11v.3","depends_on_id":"ai-meter-11v","type":"parent-child","created_at":"2026-01-02T19:39:55.491009169Z","created_by":"daemon"}]}
{"id":"ai-meter-11v.4","title":"Codex provider implementation with unit tests","description":"## Context\n- Implements Codex (OpenAI) quota API integration\n- Supports multiple accounts via glob pattern ~/.cli-proxy-api/codex-*.json\n- Returns 5-hour and 7-day usage rows per account\n- Plan Task 6\n\n## Scope\n**In:** CodexProvider struct, credential loading with glob, API calls per account, unit tests\n**Out:** Other providers, main orchestration\n\n## Primary Files\n- `internal/providers/codex.go` (new)\n- `internal/providers/codex_test.go` (new)\n\n## API Details (from QUOTA_APIS.md)\n\n### Endpoint\n```\nGET https://chatgpt.com/backend-api/wham/usage\n```\n\n### Headers\n```\nAuthorization: Bearer {accessToken}\nAccept: application/json\n```\n\n### Response\n```json\n{\n  \"plan_type\": \"pro\",\n  \"rate_limit\": {\n    \"primary_window\": {\n      \"used_percent\": 3,\n      \"reset_at\": 1767385852\n    },\n    \"secondary_window\": {\n      \"used_percent\": 9,\n      \"reset_at\": 1767859444\n    }\n  }\n}\n```\n\n### Credentials (~/.cli-proxy-api/codex-{email}.json)\n- Filename format: `codex-user@example.com.json`\n- Email extracted by stripping `codex-` prefix and `.json` suffix\n```json\n{\n  \"access_token\": \"...\",\n  \"refresh_token\": \"...\"\n}\n```\n\n## Window Mapping\n- `rate_limit.primary_window` → \"5-hour\" row\n- `rate_limit.secondary_window` → \"7-day\" row\n- `reset_at` is Unix timestamp in **seconds**\n\n## Implementation Details\n\n```go\ntype CodexAccount struct {\n    Email string\n    Token string\n}\n\ntype CodexProvider struct {\n    homeDir string\n    baseURL string        // For testing - defaults to https://chatgpt.com\n    client  *http.Client  // With 30s timeout\n}\n\nfunc NewCodexProvider() (*CodexProvider, error)\nfunc (c *CodexProvider) Name() string // returns \"Codex\"\nfunc (c *CodexProvider) FetchUsage(ctx context.Context) ([]UsageRow, error)\nfunc (c *CodexProvider) loadCredentials() ([]CodexAccount, error)\n```\n\n## Acceptance Criteria\n- [ ] Discovers all files matching ~/.cli-proxy-api/codex-*.json\n- [ ] Extracts email from filename (strip codex- prefix and .json suffix)\n- [ ] Makes GET request per account with correct headers\n- [ ] Returns 2 UsageRow per account (5-hour and 7-day)\n- [ ] Parses Unix timestamps (seconds) correctly\n- [ ] Provider column shows \"Codex (email)\" format\n- [ ] Returns warning row if no credential files found\n- [ ] Returns warning rows for malformed files (continue with others)\n- [ ] Returns warning row per account if API fails (continue with others)\n- [ ] Uses 30s HTTP timeout\n- [ ] baseURL is configurable for testing\n- [ ] All unit tests pass\n\n## Test Plan (TDD)\n1. Write test for single account happy path\n2. Implement basic credential loading and API call\n3. Write test for multiple accounts\n4. Add multi-account support\n5. Write test for missing/malformed files\n6. Add error handling\n\n### Test Cases\n```go\nfunc TestCodexProvider_FetchUsage_SingleAccount(t *testing.T) {\n    // One cred file, mock server -\u003e 2 rows\n}\n\nfunc TestCodexProvider_FetchUsage_MultipleAccounts(t *testing.T) {\n    // Two cred files -\u003e 4 rows (2 per account)\n}\n\nfunc TestCodexProvider_FetchUsage_NoCreds(t *testing.T) {\n    // No matching files -\u003e warning row\n}\n\nfunc TestCodexProvider_FetchUsage_MalformedFile(t *testing.T) {\n    // One good, one bad -\u003e 2 rows + 1 warning\n}\n\nfunc TestCodexProvider_EmailExtraction(t *testing.T) {\n    // codex-user@example.com.json -\u003e user@example.com\n}\n```\n\n## Notes for Agent\n- Use filepath.Glob for credential discovery\n- Use httptest.Server and set provider.baseURL for tests\n- Unix timestamps in seconds (not milliseconds)\n- Continue processing other accounts if one fails\n- Read-only: never modify credential files","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T19:40:22.321031981Z","created_by":"cyou","updated_at":"2026-01-02T19:40:22.321031981Z","dependencies":[{"issue_id":"ai-meter-11v.4","depends_on_id":"ai-meter-11v","type":"parent-child","created_at":"2026-01-02T19:40:22.328690862Z","created_by":"daemon"}]}
{"id":"ai-meter-11v.5","title":"Gemini provider implementation with unit tests","description":"## Context\n- Implements Gemini (Google) quota API integration\n- Uses retrieveUserQuota endpoint (requires project_id)\n- Only uses ~/.cli-proxy-api/*-*.json files (NOT ~/.gemini/oauth_creds.json which lacks project_id)\n- Supports multiple accounts, returns per-model rows\n- Plan Task 7\n\n## Scope\n**In:** GeminiProvider struct, credential loading, API calls, unit tests\n**Out:** Other providers, main orchestration\n\n## Primary Files\n- `internal/providers/gemini.go` (new)\n- `internal/providers/gemini_test.go` (new)\n\n## API Details (from QUOTA_APIS.md)\n\n### Endpoint\n```\nPOST https://cloudcode-pa.googleapis.com/v1internal:retrieveUserQuota\n```\n\n### Headers\n```\nAuthorization: Bearer {accessToken}\nContent-Type: application/json\n```\n\n### Request Body\n```json\n{\n  \"project\": \"{project_id}\"\n}\n```\n\n### Response\n```json\n{\n  \"buckets\": [\n    {\n      \"modelId\": \"gemini-2.5-pro\",\n      \"tokenType\": \"REQUESTS\",\n      \"remainingFraction\": 0.75,\n      \"resetTime\": \"2025-10-22T16:01:15Z\"\n    }\n  ]\n}\n```\n\n### Credentials (~/.cli-proxy-api/{email}-{project_id}.json)\n- **ONLY use cli-proxy-api format** (not ~/.gemini/oauth_creds.json)\n- Filename format: `user@example.com-gen-lang-client-0353902167.json`\n- Extract email: strip `-{project_id}.json` suffix\n```json\n{\n  \"token\": {\n    \"access_token\": \"ya29...\"\n  },\n  \"project_id\": \"gen-lang-client-0353902167\"\n}\n```\n\n## remainingFraction Conversion\n- `remainingFraction: 0.75` means 75% remaining = **25% used**\n- Formula: `usedPercent = (1 - remainingFraction) * 100`\n\n## Implementation Details\n\n```go\ntype GeminiAccount struct {\n    Email     string\n    Token     string\n    ProjectID string\n}\n\ntype GeminiProvider struct {\n    homeDir string\n    baseURL string        // For testing - defaults to https://cloudcode-pa.googleapis.com\n    client  *http.Client  // With 30s timeout\n}\n\nfunc NewGeminiProvider() (*GeminiProvider, error)\nfunc (g *GeminiProvider) Name() string // returns \"Gemini\"\nfunc (g *GeminiProvider) FetchUsage(ctx context.Context) ([]UsageRow, error)\nfunc (g *GeminiProvider) loadCredentials() ([]GeminiAccount, error)\n```\n\n## Acceptance Criteria\n- [ ] Discovers files matching ~/.cli-proxy-api/*-*.json\n- [ ] Filters to only files containing both `token.access_token` AND `project_id`\n- [ ] Skips ~/.gemini/oauth_creds.json (lacks project_id)\n- [ ] Extracts email from filename (strip -{project_id}.json)\n- [ ] Makes POST request per account with correct headers and body\n- [ ] Returns one UsageRow per model bucket\n- [ ] Converts remainingFraction to used percent: (1 - fraction) * 100\n- [ ] Provider column shows \"Gemini (email)\" format\n- [ ] Label column shows model ID (e.g., \"gemini-2.5-pro\")\n- [ ] Parses ISO 8601 timestamps correctly\n- [ ] Returns warning row if no valid credential files found\n- [ ] Returns warning for files missing project_id (continue with others)\n- [ ] Returns warning if empty buckets array\n- [ ] Clamps remainingFraction \u003e 1 to 100% (defensive)\n- [ ] Uses 30s HTTP timeout\n- [ ] baseURL is configurable for testing\n- [ ] All unit tests pass\n\n## Test Plan (TDD)\n\n### Test Cases\n```go\nfunc TestGeminiProvider_FetchUsage_SingleAccount(t *testing.T) {\n    // One cred file, one bucket -\u003e 1 row\n}\n\nfunc TestGeminiProvider_FetchUsage_MultipleBuckets(t *testing.T) {\n    // One account, 2 models -\u003e 2 rows\n}\n\nfunc TestGeminiProvider_FetchUsage_MultipleAccounts(t *testing.T) {\n    // Two cred files -\u003e rows for each\n}\n\nfunc TestGeminiProvider_FetchUsage_NoCreds(t *testing.T) {\n    // No matching files -\u003e warning row\n}\n\nfunc TestGeminiProvider_FetchUsage_MissingProjectID(t *testing.T) {\n    // File lacks project_id -\u003e skipped with warning\n}\n\nfunc TestGeminiProvider_RemainingFractionConversion(t *testing.T) {\n    // 0.75 -\u003e 25% used\n    // 0.0 -\u003e 100% used\n    // 1.0 -\u003e 0% used\n}\n\nfunc TestGeminiProvider_EmptyBuckets(t *testing.T) {\n    // Empty array -\u003e warning row\n}\n```\n\n## Notes for Agent\n- Use POST method (not GET like other providers)\n- Include Content-Type: application/json header\n- Be careful with glob pattern - must match *-*.json but filter by JSON content\n- Clamp remainingFraction to [0, 1] range defensively\n- Use httptest.Server and set provider.baseURL for tests\n- Read-only: never modify credential files","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T19:40:53.432960329Z","created_by":"cyou","updated_at":"2026-01-02T19:40:53.432960329Z","dependencies":[{"issue_id":"ai-meter-11v.5","depends_on_id":"ai-meter-11v","type":"parent-child","created_at":"2026-01-02T19:40:53.444517805Z","created_by":"daemon"}]}
{"id":"ai-meter-11v.6","title":"Table output formatting with unit tests","description":"## Context\n- Renders UsageRow data as ASCII table with percentage bars\n- Uses tablewriter library for formatting\n- Handles warning rows specially (merged columns with message)\n- Plan Task 4\n\n## Scope\n**In:** RenderTable function, percentage bar generation, warning row handling, unit tests\n**Out:** Provider implementations, main orchestration\n\n## Primary Files\n- `internal/output/table.go` (new)\n- `internal/output/table_test.go` (new)\n\n## Dependencies\n- Requires `internal/providers/types.go` for UsageRow\n- Requires `internal/output/time.go` for FormatResetTime\n- External: `github.com/olekukonko/tablewriter`\n\n## Expected Output Format\n```\n┌──────────────────────┬─────────┬─────────────┬─────────────────────┐\n│ Provider             │ Window  │ Usage       │ Resets At           │\n├──────────────────────┼─────────┼─────────────┼─────────────────────┤\n│ Claude               │ 5-hour  │ ████░░ 24%  │ in 2h 15m           │\n│ Claude               │ 7-day   │ ██████░ 36% │ Jan 8 07:00 PST     │\n│ Codex (user@ex.com)  │ 5-hour  │ ░░░░░░ 3%   │ in 4h 24m           │\n└──────────────────────┴─────────┴─────────────┴─────────────────────┘\n```\n\n## Warning Row Format\n```\n│ Claude               │ ⚠ credentials not found at ~/.claude/.credentials.json     │\n```\n- Provider column shows provider name\n- Remaining columns merged to display warning message prefixed with ⚠\n\n## Implementation Details\n\n```go\npackage output\n\nimport (\n    \"io\"\n    \"github.com/olekukonko/tablewriter\"\n    \"github.com/cyou/aim/internal/providers\"\n)\n\n// RenderTable renders usage rows as an ASCII table\nfunc RenderTable(rows []providers.UsageRow, w io.Writer)\n\n// generateBar creates an ASCII progress bar (6 chars wide)\n// e.g., 24% -\u003e \"████░░\"\nfunc generateBar(percent float64) string\n```\n\n### Bar Generation\n- 6 characters wide\n- Full block: █ (U+2588)\n- Empty block: ░ (U+2591)\n- Round to nearest segment (each segment = ~16.7%)\n\n## Acceptance Criteria\n- [ ] Table has 4 columns: Provider, Window, Usage, Resets At\n- [ ] Usage column shows ASCII bar + percentage (e.g., \"████░░ 24%\")\n- [ ] Resets At uses FormatResetTime for formatting\n- [ ] Warning rows show ⚠ message spanning columns 2-4\n- [ ] Table uses Unicode box-drawing characters\n- [ ] Empty rows list produces valid empty table\n- [ ] go.mod includes tablewriter dependency\n- [ ] All unit tests pass\n\n## Test Plan (TDD)\n\n### Test Cases\n```go\nfunc TestRenderTable_NormalRows(t *testing.T) {\n    // 2 rows -\u003e table with expected format\n}\n\nfunc TestRenderTable_WarningRow(t *testing.T) {\n    // Warning row -\u003e merged columns with ⚠ prefix\n}\n\nfunc TestRenderTable_MixedRows(t *testing.T) {\n    // Normal + warning rows -\u003e both render correctly\n}\n\nfunc TestRenderTable_EmptyRows(t *testing.T) {\n    // No rows -\u003e valid empty table (just headers)\n}\n\nfunc TestGenerateBar(t *testing.T) {\n    // 0% -\u003e \"░░░░░░\"\n    // 50% -\u003e \"███░░░\"\n    // 100% -\u003e \"██████\"\n    // 24% -\u003e \"█░░░░░\" or \"██░░░░\" (boundary)\n}\n```\n\n## Notes for Agent\n- Run `go get github.com/olekukonko/tablewriter` to add dependency\n- Use tablewriter's SetBorder, SetColumnSeparator for Unicode box drawing\n- For warning rows, use SetColSpan or similar to merge columns\n- Import providers package for UsageRow type\n- Import time.go for FormatResetTime","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T19:41:23.370297248Z","created_by":"cyou","updated_at":"2026-01-02T19:41:23.370297248Z","dependencies":[{"issue_id":"ai-meter-11v.6","depends_on_id":"ai-meter-11v","type":"parent-child","created_at":"2026-01-02T19:41:23.381424909Z","created_by":"daemon"}]}
